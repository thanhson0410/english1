<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Present Simple Practice Game</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .game-mode {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .mode-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            color: white;
            text-decoration: none;
        }
        .game-area {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        .game-area.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .question-counter {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
        }
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .star-rating {
            text-align: center;
            font-size: 2em;
            margin: 20px 0;
        }
        .star {
            color: #ddd;
            transition: color 0.3s ease;
        }
        .star.filled {
            color: #ffd700;
        }
        .achievement {
            background: linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            animation: celebration 0.6s ease;
        }
    </style>
</head>
<body>
    <header>
        <h1>Present Simple Practice Game</h1>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../grammar-lessons/present-simple.html">Lesson</a></li>
                <li><a href="games.html">All Games</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div id="game-menu">
            <h2>Ch·ªçn Ch·∫ø ƒê·ªô Luy·ªán T·∫≠p - Choose Practice Mode</h2>
            <div class="game-mode">
                <div class="mode-card" onclick="startGame('quiz')">
                    <h3>üìù Tr·∫Øc Nghi·ªám</h3>
                    <p>Multiple Choice Quiz</p>
                    <small>20 c√¢u h·ªèi | 5 ph√∫t</small>
                </div>
                <div class="mode-card" onclick="startGame('fill')">
                    <h3>‚úèÔ∏è ƒêi·ªÅn T·ª´</h3>
                    <p>Fill in the Blanks</p>
                    <small>15 c√¢u | 10 ph√∫t</small>
                </div>
                <div class="mode-card" onclick="startGame('transform')">
                    <h3>üîÑ Chuy·ªÉn ƒê·ªïi</h3>
                    <p>Sentence Transformation</p>
                    <small>10 c√¢u | 15 ph√∫t</small>
                </div>
                <div class="mode-card" onclick="startGame('mixed')">
                    <h3>üéØ H·ªón H·ª£p</h3>
                    <p>Mixed Practice</p>
                    <small>25 c√¢u | 20 ph√∫t</small>
                </div>
            </div>
        </div>

        <!-- Quiz Game -->
        <div id="quiz-game" class="game-area">
            <div class="game-container">
                <div class="question-counter">
                    <span>C√¢u <span id="quiz-current">1</span> / <span id="quiz-total">20</span></span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="quiz-progress"></div>
                    </div>
                </div>
                <h3 id="quiz-question"></h3>
                <div id="quiz-options"></div>
                <div id="quiz-feedback"></div>
                <div class="score-display">
                    <span>ƒêi·ªÉm: <span id="quiz-score">0</span></span>
                </div>
            </div>
        </div>

        <!-- Fill Game -->
        <div id="fill-game" class="game-area">
            <div class="game-container">
                <div class="question-counter">
                    <span>C√¢u <span id="fill-current">1</span> / <span id="fill-total">15</span></span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fill-progress"></div>
                    </div>
                </div>
                <h3 id="fill-question"></h3>
                <input type="text" id="fill-answer" class="input-field" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi...">
                <button onclick="checkFillAnswer()" class="quiz-button">Ki·ªÉm Tra</button>
                <div id="fill-feedback"></div>
                <div class="score-display">
                    <span>ƒêi·ªÉm: <span id="fill-score">0</span></span>
                </div>
            </div>
        </div>

        <!-- Results -->
        <div id="results" class="game-area">
            <div class="game-container">
                <h2>üéâ K·∫øt Qu·∫£ Luy·ªán T·∫≠p</h2>
                <div class="score-display">
                    <h3>ƒêi·ªÉm C·ªßa B·∫°n: <span id="final-score"></span></h3>
                    <div class="star-rating" id="star-rating"></div>
                </div>
                <div id="achievements"></div>
                <div id="feedback-message"></div>
                <button onclick="resetGame()" class="quiz-button">Ch∆°i L·∫°i</button>
                <a href="../grammar-lessons/present-simple.html" class="quiz-button">Xem L·∫°i L√Ω Thuy·∫øt</a>
            </div>
        </div>
    </main>

    <script>
        const quizQuestions = [
            {
                question: "She _____ to work every day.",
                options: ["go", "goes", "going", "gone"],
                correct: 1,
                explanation: "V·ªõi ch·ªß ng·ªØ 'she' (s·ªë √≠t, ng√¥i th·ª© 3), ƒë·ªông t·ª´ ph·∫£i th√™m 's/es'"
            },
            {
                question: "They _____ coffee in the morning.",
                options: ["drinks", "drink", "drinking", "drank"],
                correct: 1,
                explanation: "V·ªõi ch·ªß ng·ªØ 'they' (s·ªë nhi·ªÅu), ƒë·ªông t·ª´ gi·ªØ nguy√™n"
            },
            {
                question: "_____ he work here?",
                options: ["Do", "Does", "Is", "Are"],
                correct: 1,
                explanation: "V·ªõi ch·ªß ng·ªØ 'he' (s·ªë √≠t, ng√¥i th·ª© 3), d√πng 'Does' cho c√¢u h·ªèi"
            },
            {
                question: "I _____ like spicy food.",
                options: ["don't", "doesn't", "not", "am not"],
                correct: 0,
                explanation: "V·ªõi ch·ªß ng·ªØ 'I', d√πng 'don't' ƒë·ªÉ ph·ªß ƒë·ªãnh"
            },
            {
                question: "The sun _____ in the east.",
                options: ["rise", "rises", "rising", "rose"],
                correct: 1,
                explanation: "Di·ªÖn t·∫£ s·ª± th·∫≠t hi·ªÉn nhi√™n, ch·ªß ng·ªØ 'the sun' l√† s·ªë √≠t"
            }
        ];

        const fillQuestions = [
            {
                question: "I _____ (study) English every day.",
                answer: "study",
                explanation: "V·ªõi ch·ªß ng·ªØ 'I', ƒë·ªông t·ª´ gi·ªØ nguy√™n"
            },
            {
                question: "She _____ (watch) TV in the evening.",
                answer: "watches",
                explanation: "V·ªõi 'she' v√† ƒë·ªông t·ª´ k·∫øt th√∫c 'ch', th√™m 'es'"
            },
            {
                question: "We _____ (not go) to school on Sunday.",
                answer: "don't go",
                explanation: "C√¢u ph·ªß ƒë·ªãnh v·ªõi 'we' d√πng 'don't + V'"
            }
        ];

        let currentGame = '';
        let currentQuestion = 0;
        let score = 0;
        let totalQuestions = 0;

        function startGame(mode) {
            currentGame = mode;
            currentQuestion = 0;
            score = 0;
            
            document.getElementById('game-menu').style.display = 'none';
            
            if (mode === 'quiz') {
                totalQuestions = quizQuestions.length;
                document.getElementById('quiz-game').classList.add('active');
                document.getElementById('quiz-total').textContent = totalQuestions;
                showQuizQuestion();
            } else if (mode === 'fill') {
                totalQuestions = fillQuestions.length;
                document.getElementById('fill-game').classList.add('active');
                document.getElementById('fill-total').textContent = totalQuestions;
                showFillQuestion();
            }
        }

        function showQuizQuestion() {
            if (currentQuestion >= quizQuestions.length) {
                showResults();
                return;
            }

            const q = quizQuestions[currentQuestion];
            document.getElementById('quiz-current').textContent = currentQuestion + 1;
            document.getElementById('quiz-question').textContent = q.question;
            
            const optionsHTML = q.options.map((option, index) => 
                `<button class="quiz-button" onclick="checkQuizAnswer(${index})">${option}</button>`
            ).join('');
            document.getElementById('quiz-options').innerHTML = optionsHTML;
            
            const progress = ((currentQuestion) / totalQuestions) * 100;
            document.getElementById('quiz-progress').style.width = progress + '%';
            
            document.getElementById('quiz-feedback').innerHTML = '';
        }

        function checkQuizAnswer(selectedIndex) {
            const q = quizQuestions[currentQuestion];
            const buttons = document.querySelectorAll('#quiz-options button');
            
            buttons.forEach(btn => btn.disabled = true);
            
            if (selectedIndex === q.correct) {
                score++;
                buttons[selectedIndex].style.background = '#28a745';
                document.getElementById('quiz-feedback').innerHTML = 
                    `<div class="feedback correct">‚úÖ Ch√≠nh x√°c! ${q.explanation}</div>`;
            } else {
                buttons[selectedIndex].style.background = '#dc3545';
                buttons[q.correct].style.background = '#28a745';
                document.getElementById('quiz-feedback').innerHTML = 
                    `<div class="feedback incorrect">‚ùå Sai r·ªìi. ${q.explanation}</div>`;
            }

            document.getElementById('quiz-score').textContent = score;
            
            setTimeout(() => {
                currentQuestion++;
                showQuizQuestion();
            }, 2000);
        }

        function showFillQuestion() {
            if (currentQuestion >= fillQuestions.length) {
                showResults();
                return;
            }

            const q = fillQuestions[currentQuestion];
            document.getElementById('fill-current').textContent = currentQuestion + 1;
            document.getElementById('fill-question').textContent = q.question;
            document.getElementById('fill-answer').value = '';
            
            const progress = ((currentQuestion) / totalQuestions) * 100;
            document.getElementById('fill-progress').style.width = progress + '%';
            
            document.getElementById('fill-feedback').innerHTML = '';
        }

        function checkFillAnswer() {
            const q = fillQuestions[currentQuestion];
            const userAnswer = document.getElementById('fill-answer').value.trim().toLowerCase();
            const correctAnswer = q.answer.toLowerCase();
            
            if (userAnswer === correctAnswer) {
                score++;
                document.getElementById('fill-feedback').innerHTML = 
                    `<div class="feedback correct">‚úÖ Ch√≠nh x√°c! ${q.explanation}</div>`;
            } else {
                document.getElementById('fill-feedback').innerHTML = 
                    `<div class="feedback incorrect">‚ùå Sai r·ªìi. ƒê√°p √°n ƒë√∫ng: <strong>${q.answer}</strong><br>${q.explanation}</div>`;
            }

            document.getElementById('fill-score').textContent = score;
            
            setTimeout(() => {
                currentQuestion++;
                showFillQuestion();
            }, 2000);
        }

        function showResults() {
            document.querySelectorAll('.game-area').forEach(area => area.classList.remove('active'));
            document.getElementById('results').classList.add('active');
            
            const percentage = Math.round((score / totalQuestions) * 100);
            document.getElementById('final-score').textContent = `${score}/${totalQuestions} (${percentage}%)`;
            
            // Star rating
            const stars = Math.ceil(percentage / 20);
            let starHTML = '';
            for (let i = 1; i <= 5; i++) {
                starHTML += `<span class="star ${i <= stars ? 'filled' : ''}">‚≠ê</span>`;
            }
            document.getElementById('star-rating').innerHTML = starHTML;
            
            // Achievements and feedback
            let achievements = '';
            let feedback = '';
            
            if (percentage >= 90) {
                achievements = '<div class="achievement">üèÜ Xu·∫•t s·∫Øc! B·∫°n ƒë√£ th√†nh th·∫°o Present Simple!</div>';
                feedback = 'Tuy·ªát v·ªùi! B·∫°n ƒë√£ hi·ªÉu r·∫•t r√µ v·ªÅ th√¨ hi·ªán t·∫°i ƒë∆°n.';
            } else if (percentage >= 70) {
                achievements = '<div class="achievement">ü•à T·ªët l·∫Øm! B·∫°n ƒë√£ n·∫Øm ƒë∆∞·ª£c c∆° b·∫£n!</div>';
                feedback = 'Kh√° t·ªët! H√£y xem l·∫°i m·ªôt s·ªë ƒëi·ªÉm ch∆∞a ch·∫Øc ch·∫Øn.';
            } else if (percentage >= 50) {
                achievements = '<div class="achievement">ü•â C·∫ßn c·ªë g·∫Øng th√™m!</div>';
                feedback = 'B·∫°n c·∫ßn √¥n l·∫°i l√Ω thuy·∫øt v√† luy·ªán t·∫≠p th√™m.';
            } else {
                feedback = 'ƒê·ª´ng n·∫£n l√≤ng! H√£y xem l·∫°i b√†i h·ªçc v√† th·ª≠ l·∫°i.';
            }
            
            document.getElementById('achievements').innerHTML = achievements;
            document.getElementById('feedback-message').innerHTML = `<p><strong>${feedback}</strong></p>`;
        }

        function resetGame() {
            document.querySelectorAll('.game-area').forEach(area => area.classList.remove('active'));
            document.getElementById('game-menu').style.display = 'block';
            currentQuestion = 0;
            score = 0;
        }

        // Enter key support for fill game
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && document.getElementById('fill-game').classList.contains('active')) {
                checkFillAnswer();
            }
        });
    </script>

    <footer>
        <p>&copy; 2025 English Grammar Mastery</p>
    </footer>
</body>
</html>
