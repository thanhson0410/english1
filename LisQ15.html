<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ ch∆°i Luy·ªán nghe To√†n di·ªán</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/heroicons/2.1.3/24/solid/css/heroicons.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f3f4f6;
        }
        #topic-list-container::-webkit-scrollbar { width: 5px; }
        #topic-list-container::-webkit-scrollbar-track { background: #e5e7eb; }
        #topic-list-container::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 10px; }
        #topic-list-container::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        .topic-item { transition: all 0.3s ease-in-out; cursor: pointer; }
        .topic-item:hover { background-color: #f0f0f0; transform: translateX(4px); }
        .topic-item.playing { background-color: #fef9c3; border-right: 4px solid #facc15; color: #a16207; transform: translateX(4px); }
        .topic-item.correct { background-color: #dcfce7; border-right: 4px solid #22c55e; color: #15803d; }
        .topic-item.incorrect { background-color: #fee2e2; border-right: 4px solid #ef4444; color: #b91c1c; }

        .option-btn { transition: all 0.2s ease-in-out; cursor: pointer; }
        .option-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .selected { border-color: #4f46e5; background-color: #eef2ff; box-shadow: 0 0 0 2px #a5b4fc; }
        .correct-answer { background-color: #D1FAE5 !important; border-color: #10B981 !important; }
        .incorrect-answer { background-color: #FEE2E2 !important; border-color: #EF4444 !important; }
        #answer-section { transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; }
    </style>
</head>
<body class="bg-gray-100">

    <div class="w-full max-w-6xl mx-auto bg-white rounded-none md:rounded-2xl md:shadow-2xl md:my-4 flex flex-col md:flex-row h-screen md:h-auto md:min-h-[800px]">
        
        <div class="w-full md:w-1/3 lg:w-1/4 border-b md:border-b-0 md:border-r border-gray-200 flex flex-col">
            <div class="p-4 border-b border-gray-200">
                <h2 class="text-lg font-bold text-gray-800 text-center">Danh s√°ch ch·ªß ƒë·ªÅ</h2>
            </div>
            
            <button id="topic-toggle-button" class="md:hidden flex justify-between items-center p-4 w-full text-left font-semibold text-indigo-700 bg-indigo-50 border-b border-indigo-200">
                <span id="mobile-topic-title">Ch·ªçn ch·ªß ƒë·ªÅ</span>
                <i class="h-5 w-5 text-indigo-700 transition-transform" id="toggle-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" /></svg>
                </i>
            </button>
            
            <div id="topic-list-container" class="hidden md:block flex-grow overflow-y-auto p-2">
                </div>
        </div>

        <div id="game-area" class="w-full md:w-2/3 lg:w-3/4 flex flex-col p-4 sm:p-6 md:p-8 overflow-y-auto">
            <div class="flex-grow">
                <h1 class="hidden md:block text-2xl md:text-3xl font-bold text-center text-gray-800">Tr√≤ Ch∆°i Luy·ªán Nghe</h1>
                <h2 id="topic-title" class="text-xl md:text-2xl font-semibold text-center text-indigo-700 my-4"></h2>
                
                <div id="options-grid" class="flex flex-col gap-4"></div>
                <div id="answer-section" class="mt-8 text-center hidden opacity-0 transform scale-95">
                    <h3 id="result-title" class="text-2xl font-bold mb-4"></h3>
                    <div id="result-details" class="space-y-3 text-gray-700"></div>
                </div>
            </div>

            <div class="mt-8 text-center flex-shrink-0">
                <button id="check-button" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105">
                    Ki·ªÉm tra ƒë√°p √°n
                </button>
                <button id="reset-button" class="bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-700 transition-all duration-300 hidden">
                    Ch∆°i l·∫°i ch·ªß ƒë·ªÅ n√†y
                </button>
            </div>
        </div>
    </div>

    <script>
        const allTopics = [
            { title: "Ch√≠nh tr·ªã", questions: [{ opinion: "B", text_en: "Young people are becoming more interested in politics", text_vi: "Gi·ªõi tr·∫ª ng√†y c√†ng quan t√¢m ƒë·∫øn ch√≠nh tr·ªã h∆°n" }, { opinion: "M", text_en: "Social media has changed political activism", text_vi: "Ph∆∞∆°ng ti·ªán truy·ªÅn th√¥ng x√£ h·ªôi ƒë√£ thay ƒë·ªïi ho·∫°t ƒë·ªông ch√≠nh tr·ªã" }, { opinion: "W", text_en: "People are better informed political issues", text_vi: "M·ªçi ng∆∞·ªùi ƒë∆∞·ª£c th√¥ng tin t·ªët h∆°n v·ªÅ c√°c v·∫•n ƒë·ªÅ ch√≠nh tr·ªã" }, { opinion: "B", text_en: "More women are likely to participate in politics", text_vi: "Nhi·ªÅu ph·ª• n·ªØ c√≥ kh·∫£ nƒÉng tham gia ch√≠nh tr·ªã h∆°n" }] },
            { title: "C√¥ng ngh·ªá & Th√¥ng tin", questions: [{ opinion: "M", text_en: "The future generation will fail to cope with new information", text_vi: "Th·∫ø h·ªá t∆∞∆°ng lai s·∫Ω kh√¥ng th·ªÉ ti·∫øp thu ƒë∆∞·ª£c th√¥ng tin m·ªõi" }, { opinion: "W", text_en: "The information revolution will be good for the economy", text_vi: "Cu·ªôc c√°ch m·∫°ng th√¥ng tin s·∫Ω t·ªët cho n·ªÅn kinh t·∫ø" }, { opinion: "W", text_en: "No computer is superior to the human brain", text_vi: "Kh√¥ng c√≥ m√°y t√≠nh n√†o v∆∞·ª£t tr·ªôi h∆°n b·ªô n√£o con ng∆∞·ªùi" }, { opinion: "B", text_en: "More should be done to protect individual privacy", text_vi: "C·∫ßn ph·∫£i l√†m nhi·ªÅu h∆°n n·ªØa ƒë·ªÉ b·∫£o v·ªá quy·ªÅn ri√™ng t∆∞ c√° nh√¢n" }] },
            { title: "V·∫ª ƒë·∫πp", questions: [{ opinion: "M", text_en: "people share the very similar ideas about beauty", text_vi: "m·ªçi ng∆∞·ªùi chia s·∫ª nh·ªØng √Ω t∆∞·ªüng r·∫•t gi·ªëng nhau v·ªÅ c√°i ƒë·∫πp" }, { opinion: "W", text_en: "Views of beauty change over time", text_vi: "Quan ƒëi·ªÉm v·ªÅ v·∫ª ƒë·∫πp thay ƒë·ªïi theo th·ªùi gian" }, { opinion: "B", text_en: "Beauty can found in unlikely places", text_vi: "V·∫ª ƒë·∫πp c√≥ th·ªÉ t√¨m th·∫•y ·ªü nh·ªØng n∆°i kh√¥ng ng·ªù t·ªõi" }, { opinion: "W", text_en: "Traditional ideas of beauty are going to change", text_vi: "Nh·ªØng quan ni·ªám truy·ªÅn th·ªëng v·ªÅ c√°i ƒë·∫πp s·∫Ω thay ƒë·ªïi" }] },
            { title: "√Çm nh·∫°c & Ca sƒ©", questions: [{ opinion: "M", text_en: "Singers play a good role for young people", text_vi: "Ca sƒ© ƒë√≥ng vai tr√≤ cao cho gi·ªõi tr·∫ª" }, { opinion: "B", text_en: "taste in music is a highly personal thing", text_vi: "h∆∞∆°ng v·ªã trong √¢m nh·∫°c l√† m·ªôt ƒëi·ªÅu r·∫•t c√° nh√¢n" }, { opinion: "W", text_en: "Music is a universal language", text_vi: "√Çm nh·∫°c l√† ng√¥n ng·ªØ ph·ªï qu√°t" }, { opinion: "B", text_en: "Music can manipulate people's feelings", text_vi: "√Çm nh·∫°c c√≥ th·ªÉ thao t√∫ng c·∫£m x√∫c con ng∆∞·ªùi" }] },
            { title: "ƒê·∫°i h·ªçc", questions: [{ opinion: "B", text_en: "Technology helps make education more accessible", text_vi: "C√¥ng ngh·ªá gi√∫p gi√°o d·ª•c tr·ªü n√™n d·ªÖ ti·∫øp c·∫≠n h∆°n" }, { opinion: "M", text_en: "Social interaction is important", text_vi: "T∆∞∆°ng t√°c x√£ h·ªôi r·∫•t quan tr·ªçng" }, { opinion: "W", text_en: "The diverse curriculum is not an advantage", text_vi: "Ch∆∞∆°ng tr√¨nh gi·∫£ng d·∫°y ƒëa d·∫°ng kh√¥ng ph·∫£i l√† l·ª£i th·∫ø" }, { opinion: "M", text_en: "University competition should be encouraged", text_vi: "N√™n khuy·∫øn kh√≠ch c·∫°nh tranh ·ªü tr∆∞·ªùng ƒë·∫°i h·ªçc" }] },
            { title: "Di·ªÖn vi√™n", questions: [{ opinion: "W", text_en: "Auditions are the most important of casting", text_vi: "Bu·ªïi th·ª≠ gi·ªçng l√† quan tr·ªçng nh·∫•t trong qu√° tr√¨nh casting" }, { opinion: "M", text_en: "Actors respond best to a strong script", text_vi: "Di·ªÖn vi√™n ph·∫£n ·ª©ng t·ªët nh·∫•t v·ªõi m·ªôt k·ªãch b·∫£n hay" }, { opinion: "B", text_en: "Theatre acting and movie acting require different skills", text_vi: "Di·ªÖn xu·∫•t s√¢n kh·∫•u v√† di·ªÖn xu·∫•t ƒëi·ªán ·∫£nh ƒë√≤i h·ªèi nh·ªØng k·ªπ nƒÉng kh√°c nhau" }, { opinion: "B", text_en: "Actors need to be praised", text_vi: "Di·ªÖn vi√™n c·∫ßn ƒë∆∞·ª£c khen ng·ª£i" }] },
            { title: "Internet", questions: [{ opinion: "B", text_en: "There is too much information on the Internet", text_vi: "C√≥ qu√° nhi·ªÅu th√¥ng tin tr√™n Internet" }, { opinion: "W", text_en: "Finding information on the Internet requires skills", text_vi: "T√¨m ki·∫øm th√¥ng tin tr√™n Internet ƒë√≤i h·ªèi k·ªπ nƒÉng" }, { opinion: "W", text_en: "The use of the Internet affects the way we think", text_vi: "Vi·ªác s·ª≠ d·ª•ng Internet ·∫£nh h∆∞·ªüng ƒë·∫øn c√°ch ch√∫ng ta suy nghƒ©" }, { opinion: "B", text_en: "The internet makes young people less patient", text_vi: "Internet khi·∫øn nh·ªØng ng∆∞·ªùi tr·∫ª tu·ªïi k√©m ki√™n nh·∫´n h∆°n" }] },
            { title: "N√¥ng nghi·ªáp ƒë√¥ th·ªã", questions: [{ opinion: "M", text_en: "Living space is more important than farming space", text_vi: "Kh√¥ng gian s·ªëng quan tr·ªçng h∆°n kh√¥ng gian canh t√°c" }, { opinion: "B", text_en: "Urban farming sites can be visually appealing", text_vi: "C√°c trang tr·∫°i n√¥ng nghi·ªáp ƒë√¥ th·ªã c√≥ th·ªÉ h·∫•p d·∫´n tr·ª±c quan" }, { opinion: "W", text_en: "Urban farming can benefit local economics", text_vi: "N√¥ng nghi·ªáp ƒë√¥ th·ªã c√≥ th·ªÉ mang l·∫°i l·ª£i √≠ch kinh t·∫ø ƒë·ªãa ph∆∞∆°ng" }, { opinion: "B", text_en: "Urban farming cannot meet food needs", text_vi: "N√¥ng nghi·ªáp ƒë√¥ th·ªã kh√¥ng th·ªÉ ƒë√°p ·ª©ng nhu c·∫ßu l∆∞∆°ng th·ª±c" }] },
            { title: "Thay ƒë·ªïi n∆°i l√†m vi·ªác", questions: [{ opinion: "M", text_en: "Continuity is important when planning a career", text_vi: "S·ª± li√™n t·ª•c l√† quan tr·ªçng khi l·∫≠p k·∫ø ho·∫°ch ngh·ªÅ nghi·ªáp" }, { opinion: "W", text_en: "Job security cannot be guaranteed", text_vi: "An ninh vi·ªác l√†m kh√¥ng th·ªÉ ƒë∆∞·ª£c ƒë·∫£m b·∫£o" }, { opinion: "B", text_en: "Job satisfaction is important for motivator", text_vi: "S·ª± h√†i l√≤ng trong c√¥ng vi·ªác l√† quan tr·ªçng ƒë·ªëi v·ªõi ƒë·ªông l·ª±c" }, { opinion: "M", text_en: "Technological improvement is good for the economy", text_vi: "C·∫£i ti·∫øn c√¥ng ngh·ªá c√≥ l·ª£i cho n·ªÅn kinh t·∫ø" }] },
            { title: "Trung t√¢m ƒë·ªãa ph∆∞∆°ng", questions: [{ opinion: "M", text_en: "Exhibitions should be different and diverse.", text_vi: "C√°c cu·ªôc tri·ªÉn l√£m n√™n kh√°c bi·ªát v√† ƒëa d·∫°ng." }, { opinion: "B", text_en: "Traditional customs are gradually losing their significance.", text_vi: "C√°c phong t·ª•c truy·ªÅn th·ªëng ƒëang d·∫ßn m·∫•t ƒëi √Ω nghƒ©a c·ªßa ch√∫ng." }, { opinion: "W", text_en: "Local festivals will disappear soon in the near future.", text_vi: "C√°c l·ªÖ h·ªôi ƒë·ªãa ph∆∞∆°ng s·∫Ω s·ªõm bi·∫øn m·∫•t trong t∆∞∆°ng lai g·∫ßn." }, { opinion: "W", text_en: "Schools are important to shaping future generations.", text_vi: "Tr∆∞·ªùng h·ªçc ƒë√≥ng vai tr√≤ quan tr·ªçng trong vi·ªác ƒë·ªãnh h√¨nh c√°c th·∫ø h·ªá t∆∞∆°ng lai." }] },
            { title: "Thi·∫øt k·∫ø c·ªông ƒë·ªìng", questions: [{ opinion: "B", text_en: "Building design can influence people's behavior.", text_vi: "Thi·∫øt k·∫ø t√≤a nh√† c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn h√†nh vi c·ªßa con ng∆∞·ªùi." }, { opinion: "W", text_en: "Creating community can take time.", text_vi: "Vi·ªác t·∫°o ra c·ªông ƒë·ªìng c√≥ th·ªÉ m·∫•t th·ªùi gian." }, { opinion: "M", text_en: "Work communities and social communities are the same.", text_vi: "C·ªông ƒë·ªìng l√†m vi·ªác v√† c·ªông ƒë·ªìng x√£ h·ªôi l√† nh∆∞ nhau." }, { opinion: "M", text_en: "Technology has changed how community forms.", text_vi: "C√¥ng ngh·ªá ƒë√£ thay ƒë·ªïi c√°ch h√¨nh th√†nh c·ªông ƒë·ªìng." }] },
            { title: "Ngh·ªá thu·∫≠t", questions: [{ opinion: "W", text_en: "Art is only suitable for the privileged few", text_vi: "Ngh·ªá thu·∫≠t ch·ªâ ph√π h·ª£p v·ªõi m·ªôt s·ªë √≠t ng∆∞·ªùi c√≥ ƒë·∫∑c quy·ªÅn" }, { opinion: "M", text_en: "The government should invest more in arts", text_vi: "Ch√≠nh ph·ªß n√™n ƒë·∫ßu t∆∞ nhi·ªÅu h∆°n v√†o ngh·ªá thu·∫≠t" }, { opinion: "B", text_en: "Children should be exposed to art early", text_vi: "Tr·∫ª em n√™n ƒë∆∞·ª£c ti·∫øp x√∫c v·ªõi ngh·ªá thu·∫≠t s·ªõm" }, { opinion: "M", text_en: "In the future, art will become more accessible", text_vi: "Trong t∆∞∆°ng lai, ngh·ªá thu·∫≠t s·∫Ω tr·ªü n√™n d·ªÖ ti·∫øp c·∫≠n h∆°n" }] }
        ];

        const topicListContainer = document.getElementById('topic-list-container');
        const topicToggleButton = document.getElementById('topic-toggle-button');
        const mobileTopicTitle = document.getElementById('mobile-topic-title');
        const toggleIcon = document.getElementById('toggle-icon');
        const topicTitleEl = document.getElementById('topic-title');
        const optionsGrid = document.getElementById('options-grid');
        const answerSection = document.getElementById('answer-section');
        const resultTitle = document.getElementById('result-title');
        const resultDetails = document.getElementById('result-details');
        const checkButton = document.getElementById('check-button');
        const resetButton = document.getElementById('reset-button');

        let selectedAnswers = new Set();
        let currentTopicIndex = 0;

        function renderTopicList() {
            topicListContainer.innerHTML = '';
            allTopics.forEach((topic, index) => {
                const item = document.createElement('div');
                item.className = 'topic-item p-3 rounded-l-md font-medium text-gray-700';
                item.textContent = `${index + 1}. ${topic.title}`;
                item.dataset.index = index;
                if (topic.result === 'correct') item.classList.add('correct');
                if (topic.result === 'incorrect') item.classList.add('incorrect');
                if (index === currentTopicIndex) {
                    item.classList.add('playing');
                }
                item.onclick = () => selectTopic(index);
                topicListContainer.appendChild(item);
            });
        }

        function selectTopic(index) {
            currentTopicIndex = index;
            const topic = allTopics[index];
            topicTitleEl.textContent = topic.title;
            mobileTopicTitle.textContent = topic.title;
            initializeGame(topic.questions);
            renderTopicList();

            // Collapse mobile list after selection
            if (window.innerWidth < 768) {
                topicListContainer.classList.add('hidden');
                toggleIcon.classList.remove('rotate-180');
            }
        }

        function initializeGame(questions) {
            selectedAnswers.clear();
            optionsGrid.innerHTML = '';
            answerSection.classList.add('hidden', 'opacity-0', 'scale-95');
            checkButton.classList.remove('hidden');
            resetButton.classList.add('hidden');
            checkButton.disabled = false;

            questions.forEach((item, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn w-full text-left p-4 bg-white border-2 border-gray-200 rounded-lg focus:outline-none';
                button.disabled = false;
                
                const textEn = document.createElement('span');
                textEn.className = 'block text-gray-800 font-medium';
                textEn.textContent = item.text_en;
                
                const textVi = document.createElement('span');
                textVi.className = 'block text-indigo-700 italic text-sm mt-1';
                textVi.textContent = item.text_vi;

                button.appendChild(textEn);
                button.appendChild(textVi);

                button.dataset.index = index;
                button.onclick = () => toggleSelection(index, button);
                optionsGrid.appendChild(button);
            });
        }

        function toggleSelection(index, button) {
            if (button.disabled) return;
            if (selectedAnswers.has(index)) {
                selectedAnswers.delete(index);
                button.classList.remove('selected');
            } else {
                selectedAnswers.add(index);
                button.classList.add('selected');
            }
        }

        function checkAnswers() {
            checkButton.disabled = true;
            const currentQuestions = allTopics[currentTopicIndex].questions;
            const buttons = optionsGrid.querySelectorAll('button');
            const correctIndices = new Set();
            currentQuestions.forEach((item, index) => {
                if (item.opinion === 'B') correctIndices.add(index);
            });

            let isFullyCorrect = correctIndices.size === selectedAnswers.size && [...correctIndices].every(index => selectedAnswers.has(index));

            allTopics[currentTopicIndex].result = isFullyCorrect ? 'correct' : 'incorrect';
            renderTopicList(); 

            buttons.forEach(btn => {
                const index = parseInt(btn.dataset.index);
                btn.disabled = true;
                btn.classList.remove('selected');
                if (correctIndices.has(index)) {
                    btn.classList.add('correct-answer');
                } else if (selectedAnswers.has(index)) {
                    btn.classList.add('incorrect-answer');
                }
            });

            resultTitle.textContent = isFullyCorrect ? 'üéâ Tuy·ªát v·ªùi!' : 'ü§î C·ªë g·∫Øng h∆°n nh√©!';
            resultDetails.innerHTML = isFullyCorrect 
                ? `<p>B·∫°n ƒë√£ x√°c ƒë·ªãnh ch√≠nh x√°c t·∫•t c·∫£ c√°c quan ƒëi·ªÉm chung.</p>`
                : `<p>ƒê√°p √°n ƒë√∫ng ƒë√£ ƒë∆∞·ª£c t√¥ m√†u xanh l√°. H√£y xem l·∫°i nh√©!</p>`;
            
            answerSection.classList.remove('hidden');
            setTimeout(() => {
                answerSection.classList.remove('opacity-0', 'scale-95');
            }, 10);
            
            checkButton.classList.add('hidden');
            resetButton.classList.remove('hidden');
        }

        function toggleTopicList() {
            topicListContainer.classList.toggle('hidden');
            toggleIcon.classList.toggle('rotate-180');
        }

        window.onload = () => {
            selectTopic(0);
            topicToggleButton.onclick = toggleTopicList;
        };

        checkButton.onclick = checkAnswers;
        resetButton.onclick = () => selectTopic(currentTopicIndex);

    </script>
</body>
</html>
